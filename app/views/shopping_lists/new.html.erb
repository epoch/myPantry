<h1 class='title'></h1>

<div class="row">
  <div class="col-md-12 step-container">
      <div class="step step1"><span class="step-text">intro</span></div>
      <div class="step step2"><span class="step-text">breakfast</span></div>
      <div class="step step3"><span class="step-text">lunch</span></div>
      <div class="step step4"><span class="step-text">aperitif</span></div>
      <div class="step step5"><span class="step-text">dinner</span></div>
      <div class="step step6"><span class="step-text">drinks</span></div>
      <div class="step step7"><span class="step-text">result</span></div>
  </div>
</div>

<div class="row">
  <div class="col-md-10 col-md-offset-1 section">
    
  </div>
</div>

<div class="row">
  <button class="next btn">next</button>
  <%= link_to "exit without save", shopping_lists_path, {class:"exit btn btn-default"}%>

  <%= form_for(@shopping_list) do |f| %>
  <%= f.hidden_field :name %>
  <%= f.hidden_field :aggregator %>
  <%= f.hidden_field :ingredients %>
  <%= f.submit class: "btn btn-default new_shopping_list_button" %>
  <% end %>

</div>

<div id='spin' class="div-spin spin"></div>
<script>
  $('#new_shopping_list').hide();
  var allDiets = <%= raw JSON.parse(@search_parameter["diet"].value).to_json %>
  var allAllergies = <%=raw JSON.parse(@search_parameter["allergy"].value).to_json %>
  var allCuisines = <%= raw JSON.parse(@search_parameter["cuisine"].value).to_json %>
  var allCourses = <%= raw JSON.parse(@search_parameter["course"].value).to_json %>
  var allHolidays = <%= raw JSON.parse(@search_parameter["holiday"].value).to_json %>
  var target = ""
  var spinner = ""

  var opts = {
    lines: 13, // The number of lines to draw
    length: 20, // The length of each line
    width: 10, // The line thickness
    radius: 30, // The radius of the inner circle
    corners: 1, // Corner roundness (0..1)
    rotate: 0, // The rotation offset
    direction: 1, // 1: clockwise, -1: counterclockwise
    color: '#000', // #rgb or #rrggbb or array of colors
    speed: 1, // Rounds per second
    trail: 60, // Afterglow percentage
    shadow: false, // Whether to render a shadow
    hwaccel: false, // Whether to use hardware acceleration
    className: 'spinner', // The CSS class to assign to the spinner
    zIndex: 2e9, // The z-index (defaults to 2000000000)
    top: 'auto', // Top position relative to parent in px
    left: 'auto' // Left position relative to parent in px
  };

  

  $(document).ready(function(){
      

    var aggregator = {
      selectedDiets: [],
      selectedAllergies: [],
      selectedCuisines: [],
      selectedCourses: [],
      selectedHolidays: [],
      name:"<%= raw @shopping_list_name %>",
      meal:"",
      people: "",
      days: ""
    }

    step1.initialize(aggregator);
  }) 

</script>